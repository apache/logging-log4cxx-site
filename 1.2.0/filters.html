<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Log4cxx: Filtering Log Messages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Apache Log4cxx<span id="projectnumber">&#160;Version 1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('filters.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Filtering Log Messages </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#labeling-log-output">Labeling Log Output</a></li>
<li class="level1"><a href="#excluding-log-output">Excluding Log Output</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_src_site_markdown_filters_filters"></a></p>
<h1><a class="anchor" id="labeling-log-output"></a>
Labeling Log Output</h1>
<p>To uniquely stamp each request to relate it to a particular source, you can push contextual information into the <em>Nested Diagnostic Context</em> (NDC) using the <em><a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a></em> class or the <em>Mapped Diagnostic Context</em> provided by <em><a class="el" href="classlog4cxx_1_1MDC.html" title="A Mapped Diagnostic Context, or MDC in short, is an instrument for distinguishing interleaved log out...">log4cxx::MDC</a></em> class. For an example using <a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a> refer to <a class="el" href="ndc-example_8cpp-example.html">ndc-example.cpp</a>.</p>
<p>The NDC is managed per thread as a <em>stack</em> of contextual information. When the layout specifies that the NDC is to be included, each log entry will include the entire stack for the current thread. A <a class="el" href="classlog4cxx_1_1PatternLayout.html" title="A flexible layout configurable with pattern string.">log4cxx::PatternLayout</a> allows named entries of the MDC to be included in the log message. The user is responsible for placing the correct information in the NDC/MDC by creating a <em><a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a></em> or <em><a class="el" href="classlog4cxx_1_1MDC.html" title="A Mapped Diagnostic Context, or MDC in short, is an instrument for distinguishing interleaved log out...">log4cxx::MDC</a></em> stack variable at a few well-defined points in the code. In contrast, the per-client logger approach commands extensive changes in the code.</p>
<p>To illustrate this point, let us take the example of a servlet delivering content to numerous clients. The servlet can build the NDC at the very beginning of the request before executing other code. The contextual information can be the client's host name and other information inherent to the request, typically information contained in cookies. Hence, even if the servlet is serving multiple clients simultaneously, the logs initiated by the same code, i.e. belonging to the same logger, can still be distinguished because each client request will have a different NDC stack. Contrast this with the complexity of passing a freshly instantiated logger to all code exercised during the client's request.</p>
<p>Nevertheless, some sophisticated applications, such as virtual hosting web servers, must log differently depending on the virtual host context and also depending on the software component issuing the request. Recent Log4cxx releases support multiple hierarchy trees. This enhancement allows each virtual host to possess its own copy of the logger hierarchy.</p>
<h1><a class="anchor" id="excluding-log-output"></a>
Excluding Log Output</h1>
<p>When dealing with large amounts of logging information, it can be useful to filter on messages that we are interested in. This filtering only takes places after determining that the level of the current logger would log the message in the first place. When defining filters, note that they can only be defined on a per-appender basis, they do not globally affect anything.</p>
<p>The filtering system is similar in concept to Linux iptables rules, in that there is a chain of filters that can accept a log message, deny the log message, or pass the message on to the next filter. Accepting a log message means that the message will be logged immediately without consulting other filters. Denying has the opposite affect, immediately dropping the log message and not consulting any other filters.</p>
<p>See the documentation for <a class="el" href="classlog4cxx_1_1spi_1_1Filter.html">Filter</a> for some more information, or view a <a class="el" href="configuration-samples.html">configuration sample</a>.</p>
<p>The following filters are available:</p><ul>
<li><a class="el" href="classlog4cxx_1_1filter_1_1AndFilter.html">AndFilter</a> - Takes in a list of filters that must all match</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1DenyAllFilter.html">DenyAllFilter</a> - Drops all log messages that reach it</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LevelMatchFilter.html">LevelMatchFilter</a> - Filter log messages based off of their level</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LevelRangeFilter.html">LevelRangeFilter</a> - Filter log messages based off of their level in a given range</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LocationInfoFilter.html">LocationInfoFilter</a> - Filter log messages based off of their location(line number and/or method name)</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LoggerMatchFilter.html">LoggerMatchFilter</a> - Accept or deny depending on the logger that generated the message</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1MapFilter.html">MapFilter</a> - Based off of the log messages MDC, accept or deny the message</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1StringMatchFilter.html">StringMatchFilter</a> - If the given substring is found in the message, accept or deny</li>
</ul>
<p>The following pages have information on specific filters:</p>
<ul>
<li><a class="el" href="map-filter.html">MapFilter</a></li>
<li><a class="el" href="location-info-filter.html">LocationInfoFilter</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="usage-overview.html">Use</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="https://www.doxygen.nl/images/doxygen.png" alt="Doxygen"/></a> 1.9.6 on Thu Oct 12 2023 </li>
    <li class="center">
Copyright &copy; 2003-2023 <a href="https://www.apache.org/">Apache Software Foundation</a>. All Rights Reserved.  <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a><br/>
Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.<br/>
    </li>
  </ul>
</div>
</body>
</html>

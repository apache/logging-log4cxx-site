<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Log4cxx: Configuration Samples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Apache Log4cxx<span id="projectnumber">&#160;Version 1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('configuration-samples.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configuration Samples </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#default-initialization">Default Initialization Behaviour</a></li>
<li class="level1"><a href="#xmlfiles">XML Files</a><ul><li class="level2"><a href="#xml-example-1">XML Example 1</a></li>
<li class="level2"><a href="#xml-example-2">XML Example 2</a></li>
<li class="level2"><a href="#xml-example-3">XML Example 3</a></li>
<li class="level2"><a href="#xml-example-4">XML Example 4</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_src_site_markdown_configuration_samples"></a></p>
<p>The following snippets show various ways of configuring Log4cxx.</p>
<h1><a class="anchor" id="default-initialization"></a>
Default Initialization Behaviour</h1>
<p>The Log4cxx library does not make any assumptions about its environment. In particular, when initially created the root <a class="el" href="classlog4cxx_1_1Logger.html">Logger</a> has no appender. However the library will attempt automatic configuration.</p>
<p>If the LoggerRepositoy is not yet configured on the first call to <a class="el" href="classlog4cxx_1_1LogManager.html#ac1c64a1bd2c15d3018f3a022a059074e">getLogger</a> of <a class="el" href="classlog4cxx_1_1LogManager.html">LogManager</a>, the <a class="el" href="classlog4cxx_1_1DefaultConfigurator.html#a1114a17958c8c8383b11d6fef1e8e727">configure</a> method of <a class="el" href="classlog4cxx_1_1DefaultConfigurator.html">DefaultConfigurator</a> is called via <a class="el" href="classlog4cxx_1_1spi_1_1LoggerRepository.html#a3e9920aeb4b7dcee64f26b3aa69277c1">ensureIsConfigured</a> method of <a class="el" href="classlog4cxx_1_1spi_1_1LoggerRepository.html">LoggerRepository</a>.</p>
<p>To use automatic configuration with a non-standard file name create and use your own wrapper for <a class="el" href="classlog4cxx_1_1LogManager.html#ac1c64a1bd2c15d3018f3a022a059074e">getLogger</a>. A full example can be seen in the <a class="el" href="com_2foo_2config3_8cpp-example.html">com/foo/config3.cpp</a> file.</p>
<h1><a class="anchor" id="xmlfiles"></a>
XML Files</h1>
<p>One way of configuring Log4cxx is with XML files. The following are some examples on various ways of using an XML file to configure the logging.</p>
<h2><a class="anchor" id="xml-example-1"></a>
XML Example 1</h2>
<p>This simple example simply writes messages to stdout. If you want to send messages to stderr instead, simply change the 'Target' value to <code>System.err</code>.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Target&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;System.out&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;%m%n&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;info&quot;</span> /&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>Sample output: </p><div class="fragment"><div class="line">Hello there!</div>
</div><!-- fragment --><h2><a class="anchor" id="xml-example-2"></a>
XML Example 2</h2>
<p>This example sends data to both stdout, as well as to a file. With this configuration the "example.log" file will be created in our working directory.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Target&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;System.out&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;FileAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.FileAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;file&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;example.log&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n&quot;</span> /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;info&quot;</span> /&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span>/&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;FileAppender&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>Sample output: </p><div class="fragment"><div class="line">[2020-12-24 15:57:35] root INFO  - Hello there!</div>
</div><!-- fragment --><h2><a class="anchor" id="xml-example-3"></a>
XML Example 3</h2>
<p>This example shows how you can configure logging for a particular category.</p>
<p>Assume that our loggers are in our code as such:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> root = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25">log4cxx::Logger::getRootLogger</a>();</div>
<div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> com  = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>( <span class="stringliteral">&quot;com&quot;</span> );</div>
<div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> com_example = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>( <span class="stringliteral">&quot;com.example&quot;</span> );</div>
<div class="line"> </div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>( root, <span class="stringliteral">&quot;Hello there!&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>( com, <span class="stringliteral">&quot;com logger debug&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>( com_example, <span class="stringliteral">&quot;com.example debug message&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>( com, <span class="stringliteral">&quot;com debug message&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>( com_example, <span class="stringliteral">&quot;com.example trace message&quot;</span> );</div>
<div class="ttc" id="aclasslog4cxx_1_1Logger_html_ab2d1e6be52dbe1bc81e01fd70a755a63"><div class="ttname"><a href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a></div><div class="ttdeci">static LoggerPtr getLogger(const std::string &amp;name)</div><div class="ttdoc">Retrieve a logger by name in current encoding.</div></div>
<div class="ttc" id="aclasslog4cxx_1_1Logger_html_ac53c8f83b37b20ff4b18ee87b772be25"><div class="ttname"><a href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25">log4cxx::Logger::getRootLogger</a></div><div class="ttdeci">static LoggerPtr getRootLogger()</div><div class="ttdoc">Retrieve the root logger.</div></div>
<div class="ttc" id="agroup__LoggingMacros_html_ga61dfed4f5eca82725a90a331f37857d3"><div class="ttname"><a href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a></div><div class="ttdeci">#define LOG4CXX_INFO(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for INFO even...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2141</div></div>
<div class="ttc" id="agroup__LoggingMacros_html_ga806900dd7eafb458d0472d9c8f84594b"><div class="ttname"><a href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a></div><div class="ttdeci">#define LOG4CXX_TRACE(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for TRACE eve...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2105</div></div>
<div class="ttc" id="agroup__LoggingMacros_html_gae1bc2ab20d5f2d7660995ea8244d3a26"><div class="ttname"><a href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a></div><div class="ttdeci">#define LOG4CXX_DEBUG(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for DEBUG eve...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2073</div></div>
<div class="ttc" id="anamespacelog4cxx_html_acd073adf77cc8545b10ac024a474be0d"><div class="ttname"><a href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Logger &gt; LoggerPtr</div><div class="ttdef"><b>Definition:</b> defaultloggerfactory.h:27</div></div>
</div><!-- fragment --><p>For this configuration, we have set any logger that is at the <code>com</code> level or below to be debug. However, we have also set the logger <code>com.example</code> to have a more verbose <code>trace</code> level to see more information from that particular logger. The "example.log" file will be created in our temporary directory.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Target&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;System.out&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;FileAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.FileAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;file&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;${TMP}/example.log&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n&quot;</span> /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;info&quot;</span> /&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span>/&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;FileAppender&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">logger</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;com&quot;</span> &gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;debug&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">logger</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">logger</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;com.example&quot;</span> &gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;trace&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">logger</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>Sample output:</p>
<div class="fragment"><div class="line">[2020-12-24 16:05:48] root INFO  - Hello there!</div>
<div class="line">[2020-12-24 16:05:48] com DEBUG - com logger debug</div>
<div class="line">[2020-12-24 16:05:48] com.example DEBUG - com.example debug message</div>
<div class="line">[2020-12-24 16:05:48] com.example TRACE - com.example trace message</div>
</div><!-- fragment --><h2><a class="anchor" id="xml-example-4"></a>
XML Example 4</h2>
<p>This example shows how to add a filter to an appender that will accept messages that match a certain string. If our loggers are configured as such:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> root = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25">log4cxx::Logger::getRootLogger</a>();</div>
<div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> com  = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>( <span class="stringliteral">&quot;com&quot;</span> );</div>
<div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> com_example = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>( <span class="stringliteral">&quot;com.example&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>( root, <span class="stringliteral">&quot;Hello there!&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>( com, <span class="stringliteral">&quot;Starting to do the thing&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>( com_example, <span class="stringliteral">&quot;A more specific logger&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>( com, <span class="stringliteral">&quot;Done with the thing&quot;</span> );</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>( com_example, <span class="stringliteral">&quot;A very specific message&quot;</span> );</div>
</div><!-- fragment --><p>and we only want to see messages that have the string "specific" in them, we can create a filter chain that will accept messages that have that, and deny everything else:</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Target&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;System.out&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.varia.StringMatchFilter&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;StringToMatch&quot;</span></div>
<div class="line">             <span class="keyword">value</span>=<span class="stringliteral">&quot;specific&quot;</span> /&gt;</div>
<div class="line">      &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AcceptOnMatch&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.varia.DenyAllFilter&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">     &lt;<span class="keywordtype">priority</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;trace&quot;</span> /&gt;</div>
<div class="line">     &lt;<span class="keywordtype">appender-ref</span> <span class="keyword">ref</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>Sample output:</p>
<div class="fragment"><div class="line">[2021-03-26 20:20:36] com.example DEBUG - A more specific logger</div>
<div class="line">[2021-03-26 20:20:36] com.example TRACE - A very specific message</div>
</div><!-- fragment --><p>Note that even though we have the root logger set to the most verbose level(trace), the only messages that we saw were the ones with "specific" in them. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="usage-overview.html">Use</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="https://www.doxygen.nl/images/doxygen.png" alt="Doxygen"/></a> 1.9.6 on Wed Oct 18 2023 </li>
    <li class="center">
Copyright &copy; 2003-2023 <a href="https://www.apache.org/">Apache Software Foundation</a>. All Rights Reserved.  <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a><br/>
Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.<br/>
    </li>
  </ul>
</div>
</body>
</html>

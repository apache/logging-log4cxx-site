<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Log4cxx: Loggers, Appenders and Layouts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '42']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Log4cxx
   &#160;<span id="projectnumber">Version 1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('concepts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Loggers, Appenders and Layouts </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#loggers">Loggers</a><ul><li class="level2"><a href="#naming">Naming</a></li>
<li class="level2"><a href="#getLogger">Instantiation</a></li>
<li class="level2"><a href="#requests">Requests</a><ul><li class="level3"><a href="#custom-types">Logging Custom Types</a></li>
<li class="level3"><a href="#logging-with-fmt">Using {fmt} style requests</a></li>
<li class="level3"><a href="#request-cost">Overhead</a></li>
<li class="level3"><a href="#removing-log-statements">Removing log requests</a></li>
<li class="level3"><a href="#removing-location-information">Removing location information</a></li>
</ul>
</li>
<li class="level2"><a href="#levels">Levels</a><ul><li class="level3"><a href="#level-inheritance">Level Inheritance</a></li>
<li class="level3"><a href="#selection-rule">Basic Selection Rule</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#appenders">Appenders</a><ul><li class="level2"><a href="#appender-additivity">Additivity</a></li>
</ul>
</li>
<li class="level1"><a href="#layouts">Layouts</a><ul><li class="level2"><a href="#pattern1">Pattern 1</a></li>
<li class="level2"><a href="#pattern2">Pattern 2</a></li>
<li class="level2"><a href="#pattern3">Pattern 3</a></li>
<li class="level2"><a href="#pattern4">Pattern 4</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_src_site_markdown_concepts"></a></p>
<p>Log4cxx has three main components: <em>loggers</em>, <em>appenders</em> and <em>layouts</em>. These three types of components work together to enable developers to log messages according to message type and level, and to control at runtime how these messages are formatted and where they are reported.</p>
<p>Configuration of the Log4cxx environment is typically done at application initialization. The preferred way is by reading a configuration file. This approach was discussed in <a href="quick-start.html#configuration">Runtime Configuration</a>.</p>
<h1><a class="anchor" id="loggers"></a>
Loggers</h1>
<p>The first and foremost advantage of any logging API over plain <code>std::cout</code> resides in its ability to disable certain log statements while allowing others to print unhindered. This capability is provided by assigning each logging request to a category. A Log4cxx category is a name and it is held by a <a class="el" href="classlog4cxx_1_1Logger.html" title="This is the central class in the log4cxx package.">log4cxx::Logger</a> instance. The name of the class in which the logging request appears is a commonly used naming scheme but any category naming scheme may be used. Logging category names (or equivalently logger name) are case-sensitive.</p>
<h2><a class="anchor" id="naming"></a>
Naming</h2>
<p>Log4cxx makes it easy to name loggers by <em>software component</em>. This can be accomplished by statically instantiating a logger in each class, with the logger name equal to the fully qualified name of the class. This is a useful and straightforward method of defining loggers. As the log output bears the name of the generating logger, this naming strategy makes it easy to identify the origin of a log message. However, this is only one possible, albeit common, strategy for naming loggers. Log4cxx does not restrict the possible set of loggers. The developer is free to name the loggers as desired.</p>
<p>Nevertheless, naming loggers after the class where they are located seems to be the best strategy known so far.</p>
<p>Logger names follow a hierarchical naming rule. A logger is said to be an <em>ancestor</em> of another logger if its name followed by a dot is a prefix of the <em>descendant</em> logger name. A logger is said to be a <em>parent</em> of a <em>child</em> logger if there are no ancestors between itself and the descendant logger.</p>
<p>For example, the logger named <code>com.foo</code> is a parent of the logger named <code>com.foo.Bar</code>. Similarly, <code>java</code> is a parent of <code>java.util</code> and an ancestor of <code>java.util.Vector</code>. This naming scheme should be familiar to most developers.</p>
<p>Sometimes a per object logger is useful. When each class instance has a identifiable name (e.g. when it is instantiated from configuration data) add a member variable to hold a <a class="el" href="classlog4cxx_1_1LoggerInstancePtr.html" title="A smart pointer (implicity convertable to LoggerPtr) that conditionally removes a Logger from the spi...">log4cxx::LoggerInstancePtr</a> and initialize it with a name that makes it a <em>descendant</em> of the class. This allows activation of DEBUG logging for a single object or all objects of that class.</p>
<h2><a class="anchor" id="getLogger"></a>
Instantiation</h2>
<p>The root logger resides at the top of the hierarchy. It is exceptional in two ways:</p>
<ol type="1">
<li>it always exists,</li>
<li>it cannot be retrieved by name.</li>
</ol>
<p>Use the class static method <a class="el" href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25" title="Retrieve the root logger.">log4cxx::Logger::getRootLogger</a> or <a class="el" href="classlog4cxx_1_1LogManager.html#a653a8b4b1548f75d9e12615dd4a677f7" title="Retrieve the root logger from the LoggerRepository.">log4cxx::LogManager::getRootLogger</a> to retrieve it.</p>
<p>All other loggers are held in a <a class="el" href="classlog4cxx_1_1spi_1_1LoggerRepository.html" title="A LoggerRepository is used to create and retrieve Loggers.">log4cxx::spi::LoggerRepository</a> singleton. They can be retrieved by calling a <a class="el" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63" title="Retrieve a logger by name in current encoding.">log4cxx::Logger::getLogger</a> static class method which takes the name of the desired logger as an argument. An instance of <a class="el" href="classlog4cxx_1_1Logger.html" title="This is the central class in the log4cxx package.">log4cxx::Logger</a> is instantiated if a logger of that name is not already held by the <a class="el" href="classlog4cxx_1_1spi_1_1LoggerRepository.html" title="A LoggerRepository is used to create and retrieve Loggers.">log4cxx::spi::LoggerRepository</a> instance.</p>
<p>The core Log4cxx API is made available by <code>#include &lt;<a class="el" href="log4cxx_2logger_8h.html">log4cxx/logger.h</a>&gt;</code>. The commonly used <a class="el" href="log4cxx_2logger_8h.html">log4cxx/logger.h</a> methods and macros are listed below.</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacelog4cxx.html">log4cxx</a> {</div>
<div class="line">    <span class="keyword">class </span>Logger {</div>
<div class="line">        <span class="keyword">public</span>:</div>
<div class="line">            <span class="comment">// Creation &amp; retrieval methods:</span></div>
<div class="line">            <span class="keyword">static</span> <a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">LoggerPtr</a> <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25">getRootLogger</a>();</div>
<div class="line">            <span class="keyword">static</span> <a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">LoggerPtr</a> <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">getLogger</a>(<span class="keyword">const</span> std::string&amp; name);</div>
<div class="line">            <span class="keyword">static</span> <a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">LoggerPtr</a> <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">getLogger</a>(<span class="keyword">const</span> std::wstring&amp; name);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use these macros instead of calling Logger methods directly.</span></div>
<div class="line"><span class="comment">// Macros will handle char or wchar_t pointers or strings</span></div>
<div class="line"><span class="comment">// and any object that provides a</span></div>
<div class="line"><span class="comment">// &lt;code&gt;operator&lt;&lt;(std::ostream&amp;, ...)&lt;/code&gt; overload.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_TRACE(logger, expression) ...</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_DEBUG(logger, expression) ...</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_INFO(logger, expression) ...</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_WARN(logger, expression) ...</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_ERROR(logger, expression) ...</span></div>
<div class="line"><span class="preprocessor">#define LOG4CXX_FATAL(logger, expression) ...</span></div>
<div class="ttc" id="aclasslog4cxx_1_1Logger_html_ab2d1e6be52dbe1bc81e01fd70a755a63"><div class="ttname"><a href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a></div><div class="ttdeci">static LoggerPtr getLogger(const std::string &amp;name)</div><div class="ttdoc">Retrieve a logger by name in current encoding.</div></div>
<div class="ttc" id="aclasslog4cxx_1_1Logger_html_ac53c8f83b37b20ff4b18ee87b772be25"><div class="ttname"><a href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25">log4cxx::Logger::getRootLogger</a></div><div class="ttdeci">static LoggerPtr getRootLogger()</div><div class="ttdoc">Retrieve the root logger.</div></div>
<div class="ttc" id="anamespacelog4cxx_html"><div class="ttname"><a href="namespacelog4cxx.html">log4cxx</a></div><div class="ttdef"><b>Definition:</b> configuration.h:25</div></div>
<div class="ttc" id="anamespacelog4cxx_html_acd073adf77cc8545b10ac024a474be0d"><div class="ttname"><a href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Logger &gt; LoggerPtr</div><div class="ttdef"><b>Definition:</b> defaultloggerfactory.h:27</div></div>
</div><!-- fragment --><p>Calling the <em>getLogger</em> method with the same name will always return a reference to the exact same logger object.</p>
<p>For example, in</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> x = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>(<span class="stringliteral">&quot;wombat&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> y = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>(<span class="stringliteral">&quot;wombat&quot;</span>);</div>
</div><!-- fragment --><p><em>x</em> and <em>y</em> refer to <em>exactly</em> the same logger object.</p>
<p>Thus, it is possible to configure a logger and then to retrieve the same instance somewhere else in the code without passing around references. In fundamental contradiction to biological parenthood, where parents always preceed their children, Log4cxx loggers can be created and configured in any order. In particular, a "parent" logger will find and link to its descendants even if it is instantiated after them.</p>
<h2><a class="anchor" id="requests"></a>
Requests</h2>
<p>Logging requests are made by invoking a method of a logger instance, preferrably through the use of LOG4CXX_INFO or similar macros which support short-circuiting if the threshold is not satisfied and use of the insertion operator (&lt;&lt;) in the message parameter.</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="namespacelog4cxx.html#acd073adf77cc8545b10ac024a474be0d">log4cxx::LoggerPtr</a> logger(<a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>(<span class="stringliteral">&quot;com.foo&quot;</span>));</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* region = <span class="stringliteral">&quot;World&quot;</span>;</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>(logger, <span class="stringliteral">&quot;Simple message text.&quot;</span>);</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>(logger, <span class="stringliteral">&quot;Hello, &quot;</span> &lt;&lt; region);</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>(logger, L<span class="stringliteral">&quot;Iteration &quot;</span> &lt;&lt; i);</div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>(logger, <span class="stringliteral">&quot;e^10 = &quot;</span> &lt;&lt; std::scientific &lt;&lt; exp(10.0));</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use a wchar_t first operand to force use of wchar_t based stream.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga530190bc1766b89d1f69ad572509aed2">LOG4CXX_WARN</a>(logger, L<span class="stringliteral">&quot;&quot;</span> &lt;&lt; i &lt;&lt; L<span class="stringliteral">&quot; is the number of the iteration.&quot;</span>);</div>
<div class="ttc" id="agroup__LoggingMacros_html_ga530190bc1766b89d1f69ad572509aed2"><div class="ttname"><a href="group__LoggingMacros.html#ga530190bc1766b89d1f69ad572509aed2">LOG4CXX_WARN</a></div><div class="ttdeci">#define LOG4CXX_WARN(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for WARN even...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2205</div></div>
<div class="ttc" id="agroup__LoggingMacros_html_ga61dfed4f5eca82725a90a331f37857d3"><div class="ttname"><a href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a></div><div class="ttdeci">#define LOG4CXX_INFO(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for INFO even...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2161</div></div>
<div class="ttc" id="agroup__LoggingMacros_html_gae1bc2ab20d5f2d7660995ea8244d3a26"><div class="ttname"><a href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a></div><div class="ttdeci">#define LOG4CXX_DEBUG(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for DEBUG eve...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2075</div></div>
</div><!-- fragment --><h3><a class="anchor" id="custom-types"></a>
Logging Custom Types</h3>
<p>Often, the data that needs to be logged is not just standard data types (such as int, string, etc), but amalgamations of those types in a data structure such as a class or struct. In order to log these custom types, simply override an <code>operator&lt;&lt;</code> function, the same as if you would print the custom type to <code>std::cout</code>. This can be accomplished by doing the following:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>MyStruct {</div>
<div class="line">    <span class="keywordtype">int</span> x;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">std::ostream&amp; <a class="code hl_function" href="log4cxx-qt_2messagebuffer_8h.html#a2d945a50e5af4bdba2fd330159650dec">operator&lt;&lt;</a>( std::ostream&amp; stream, <span class="keyword">const</span> MyStruct&amp; mystruct ){</div>
<div class="line">    stream &lt;&lt; <span class="stringliteral">&quot;[MyStruct x:&quot;</span> &lt;&lt; mystruct.x &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> stream;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> someMethod(){</div>
<div class="line">    MyStruct mine;</div>
<div class="line">    mine.x = 90;</div>
<div class="line">    <a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>( logger, <span class="stringliteral">&quot;Some important information: &quot;</span> &lt;&lt; mine );</div>
<div class="line">}</div>
<div class="ttc" id="alog4cxx-qt_2messagebuffer_8h_html_a2d945a50e5af4bdba2fd330159650dec"><div class="ttname"><a href="log4cxx-qt_2messagebuffer_8h.html#a2d945a50e5af4bdba2fd330159650dec">operator&lt;&lt;</a></div><div class="ttdeci">log4cxx::helpers::UniCharMessageBuffer &amp; operator&lt;&lt;(log4cxx::helpers::UniCharMessageBuffer &amp;mb, const QString &amp;msg)</div><div class="ttdef"><b>Definition:</b> log4cxx-qt/messagebuffer.h:24</div></div>
</div><!-- fragment --><p>This will output data similar to the following:</p>
<div class="fragment"><div class="line">0 [0x7fd1eed63bc0] INFO root null - Some important information: [MyStruct x:90]</div>
</div><!-- fragment --><h3><a class="anchor" id="logging-with-fmt"></a>
Using {fmt} style requests</h3>
<p>One issue with utilizing Log4cxx and its ostream style of logging is that log statements can be very awkward if you need to precisely format something:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>( rootLogger, <span class="stringliteral">&quot;Numbers can be formatted with excessive operator&lt;&lt;: &quot;</span></div>
<div class="line">              &lt;&lt; std::setprecision(3) &lt;&lt; 22.456</div>
<div class="line">              &lt;&lt; <span class="stringliteral">&quot; And as hex: &quot;</span></div>
<div class="line">              &lt;&lt; std::setbase( 16 ) &lt;&lt; 123 );</div>
</div><!-- fragment --><p>This leads to very awkward code to read and write, especially as iostreams don't support positional arguments at all.</p>
<p>In order to get around this, Log4cxx provides a family of macros that support positional arguments and printf-like formatting, which makes for much clearer (and more efficient) code like the following:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga08bbfedb425d706e674fc92a7bcf9b0c">LOG4CXX_INFO_FMT</a>( rootLogger, <span class="stringliteral">&quot;Numbers can be formatted with a format string {:.1f} and as hex: {:x}&quot;</span>, 22.456, 123 );</div>
<div class="ttc" id="agroup__LoggingMacros_html_ga08bbfedb425d706e674fc92a7bcf9b0c"><div class="ttname"><a href="group__LoggingMacros.html#ga08bbfedb425d706e674fc92a7bcf9b0c">LOG4CXX_INFO_FMT</a></div><div class="ttdeci">#define LOG4CXX_INFO_FMT(logger, fmt,...)</div><div class="ttdoc">Add a new logging event containing a message defined by fmt and ... to attached appender(s) if logger...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2182</div></div>
</div><!-- fragment --><p>The <code>LOG4CXX_[level]_FMT</code> macros use the <a href="https://fmt.dev/latest/index.html">{fmt}</a> library by default. Note that Log4cxx does not include a copy of {fmt}, so you must include the correct headers and linker flags in order to use the <code>LOG4CXX_[level]_FMT</code> family of macros. Provide <code>LOG4CXX_FORMAT_NS=std</code> to the preprocessor to have the <code>LOG4CXX_[level]_FMT</code> macros use the standard library version of <a href="https://en.cppreference.com/w/cpp/utility/format/format">format</a>.</p>
<p>As with the standard logger macros, these macros will also be compiled out if the <code>LOG4CXX_THRESHOLD</code> macro is set to a level that will compile out the non-FMT macros.</p>
<p>A full example can be seen in the <a class="el" href="format-string_8cpp-example.html">format-string.cpp</a> file.</p>
<h3><a class="anchor" id="request-cost"></a>
Overhead</h3>
<p>One of the often-cited arguments against logging is its computational cost. This is a legitimate concern as even moderately sized applications can generate thousands of log requests. Much effort was spent measuring and tweaking logging performance. Log4cxx claims to be fast and flexible: speed first, flexibility second.</p>
<p>For performance sensitive applications, you should be aware of the following.</p>
<ol type="1">
<li><p class="startli"><b>Logging performance when logging is turned off.</b></p>
<p class="startli">The LOG4CXX_DEBUG and similar macros have a cost of an in-lined null pointer check plus an integer comparison when the logger not currently enabled for that level. The other terms inside the macro are not evaluated.</p>
<p class="startli">When the level is enabled for a logger but the logging hierarchy is turned off entirely or just for a set of levels, the cost of a log request consists of a method invocation plus an integer comparison.</p>
</li>
<li><p class="startli"><b>Actually outputting log messages</b></p>
<p class="startli">This is the cost of formatting the log output and sending it to its target destination. Here again, a serious effort was made to make layouts (formatters) perform as quickly as possible. The same is true for appenders.</p>
</li>
<li><p class="startli"><b>The cost of changing a logger's level.</b></p>
<p class="startli">The threshold value stored in any child logger is updated. This is done iterating over the map of all known logger objects and walking the hierarchy of each.</p>
<p class="startli">There has been a serious effort to make this hierarchy walk to be as fast as possible. For example, child loggers link only to their existing ancestors. In the <em>BasicConfigurator</em> example shown earlier, the logger named <em>com.foo.Bar</em> is linked directly to the root logger, thereby circumventing the nonexistent <em>com</em> or <em>com.foo</em> loggers. This significantly improves the speed of the walk, especially in "sparse" hierarchies.</p>
</li>
</ol>
<h3><a class="anchor" id="removing-log-statements"></a>
Removing log requests</h3>
<p>Sometimes, you may want to remove all log statements from your program, either for speed purposes or to remove sensitive information. This can easily be accomplished at build-time when using the standard <code>LOG4CXX_[level]</code> macros (<code>LOG4CXX_TRACE</code>, <code>LOG4CXX_DEBUG</code>, <code>LOG4CXX_INFO</code>, <code>LOG4CXX_WARN</code>, <code>LOG4CXX_ERROR</code>, <code>LOG4CXX_FATAL</code>) or their {fmt} library equivalents (<code>LOG4CXX_TRACE_FMT</code>, <code>LOG4CXX_DEBUG_FMT</code>, <code>LOG4CXX_INFO_FMT</code>, <code>LOG4CXX_WARN_FMT</code>, <code>LOG4CXX_ERROR_FMT</code>, <code>LOG4CXX_FATAL_FMT</code>).</p>
<p>Log statements can be removed either above a certain level, or they can be disabled entirely.</p>
<p>For example, if we want to remove all log statements within our program that use the <code>LOG4CXX_[level]</code> family of macros, add a preprocessor definition <code>LOG4CXX_THRESHOLD</code> set to 50001 or greater. This will ensure that any log statement that uses the <code>LOG4CXX_[level]</code>-macro will be compiled out of the program. To remove all log statements at <code>DEBUG</code> or below, set <code>LOG4CXX_THRESHOLD</code> to a value between 10001-20000.</p>
<p>The levels are set as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger Level   </th><th class="markdownTableHeadNone">Integer Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TRACE   </td><td class="markdownTableBodyNone">5000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DEBUG   </td><td class="markdownTableBodyNone">10000    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">20000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WARN   </td><td class="markdownTableBodyNone">30000    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ERROR(1)   </td><td class="markdownTableBodyNone">40000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FATAL   </td><td class="markdownTableBodyNone">50000   </td></tr>
</table>
<p>(1) The <code>LOG4CXX_ASSERT</code> macro is the same level as <code>LOG4CXX_ERROR</code></p>
<p>Note that this has no effect on other macros, such as using the <code>LOG4CXX_LOG</code>, <code>LOG4CXX_LOGLS</code>, or <code>LOG4CXX_L7DLOG</code> family of macros.</p>
<h3><a class="anchor" id="removing-location-information"></a>
Removing location information</h3>
<p>Whenever you log a message with Log4cxx, metadata about the location of the logging statement is captured as well through the preprocessor. This includes the file name, the method name, and the line number. If you would not like to include this information in your build but you still wish to keep the log statements, define <code>LOG4CXX_DISABLE_LOCATION_INFO</code> in your build system. This will allow log messages to still be created, but the location information will be invalid.</p>
<h2><a class="anchor" id="levels"></a>
Levels</h2>
<p>A <a class="el" href="classlog4cxx_1_1Logger.html" title="This is the central class in the log4cxx package.">log4cxx::Logger</a> instance <em>may</em> be assigned a specific level otherwise it will inherit it from the closest ancestor with an assigned level. The root logger always has an assigned level.</p>
<p>The pre-defined levels: TRACE, DEBUG, INFO, WARN, ERROR and FATAL are available. These are defined in the <a class="el" href="level_8h.html">log4cxx/level.h</a> file. Additional levels may be registered by the application but this is not recommended (See <a href="faq.html#custom_levels">Custom_levels</a>).</p>
<p>A logging request is said to be <em>enabled</em> if its level is higher than or equal to the level of its logger. Otherwise, the request is said to be <em>disabled</em>. A logger without an assigned level will inherit one from the hierarchy. This rule is summarized below.</p>
<h3><a class="anchor" id="level-inheritance"></a>
Level Inheritance</h3>
<p>The <em>effective level</em> for a given logger <em>X.Y.Z</em>, is equal to the first assigned in the logger hierarchy, starting at <em>X.Y.Z</em> and proceeding upwards in the hierarchy towards the <em>root</em> logger.</p>
<p>To ensure that all loggers can eventually inherit a level, the root logger always has an assigned level.</p>
<p>Below are four tables with various assigned level values and the resulting effective levels according to the above rule.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger name   </th><th class="markdownTableHeadNone">Assigned level   </th><th class="markdownTableHeadNone">Effective level    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X.Y   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X.Y.Z   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">INFO   </td></tr>
</table>
<p>Example 1</p>
<p>In example 1 above, only the root logger is assigned a level. This level value, <em>INFO</em>, is inherited by the other loggers <em>X</em>, <em>X.Y</em> and <em>X.Y.Z</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger name   </th><th class="markdownTableHeadNone">Assigned level   </th><th class="markdownTableHeadNone">Effective level    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X   </td><td class="markdownTableBodyNone">WARN   </td><td class="markdownTableBodyNone">WARN    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X.Y   </td><td class="markdownTableBodyNone">DEBUG   </td><td class="markdownTableBodyNone">DEBUG    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X.Y.Z   </td><td class="markdownTableBodyNone">TRACE   </td><td class="markdownTableBodyNone">TRACE   </td></tr>
</table>
<p>Example 2</p>
<p>In example 2, all loggers have an assigned level value. There is no use of level inheritence.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger name   </th><th class="markdownTableHeadNone">Assigned level   </th><th class="markdownTableHeadNone">Effective level    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X   </td><td class="markdownTableBodyNone">DEBUG   </td><td class="markdownTableBodyNone">DEBUG    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X.Y   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">DEBUG    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X.Y.Z   </td><td class="markdownTableBodyNone">WARN   </td><td class="markdownTableBodyNone">WARN   </td></tr>
</table>
<p>Example 3</p>
<p>In example 3, the loggers <em>root</em>, <em>X</em> and <em>X.Y.Z</em> are assigned the levels <em>INFO</em>, <em>DEBUG</em> and <em>WARN</em> respectively. The logger <em>X.Y</em> inherits its level from its parent <em>X</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger name   </th><th class="markdownTableHeadNone">Assigned level   </th><th class="markdownTableHeadNone">Effective level    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root   </td><td class="markdownTableBodyNone">INFO   </td><td class="markdownTableBodyNone">INFO    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X   </td><td class="markdownTableBodyNone">DEBUG   </td><td class="markdownTableBodyNone">DEBUG    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X.Y   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">DEBUG    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X.Y.Z   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">DEBUG   </td></tr>
</table>
<p>Example 4</p>
<p>In example 4, the loggers <em>root</em> and <em>X</em> and are assigned the levels <em>INFO</em> and <em>DEBUG</em> respectively. The loggers <em>X.Y</em> and <em>X.Y.Z</em> inherit their level from their nearest parent having an assigned level, <em>X</em>.</p>
<h3><a class="anchor" id="selection-rule"></a>
Basic Selection Rule</h3>
<p>A log request of level <em>p</em> in a logger with (either assigned or inherited, whichever is appropriate) level <em>q</em>, is enabled if <em>p &gt;= q</em>.</p>
<p>This rule is at the heart of Log4cxx. It assumes that levels are ordered. For the standard levels, we have <em>TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL</em>.</p>
<p>Here is an example of this rule.</p>
<div class="fragment"><div class="line"><span class="comment">// get a logger instance named &quot;com.foo&quot;</span></div>
<div class="line"><span class="keyword">auto</span> logger = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>(<span class="stringliteral">&quot;com.foo&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now set its level. Normally you do not need to set the</span></div>
<div class="line"><span class="comment">// level of a logger programmatically. This is usually done</span></div>
<div class="line"><span class="comment">// in configuration files.</span></div>
<div class="line">logger-&gt;setLevel(<a class="code hl_function" href="classlog4cxx_1_1Level.html#ab7c74df8715d5009b3d9f06658d19847">log4cxx::Level::getInfo</a>());</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> barlogger = <a class="code hl_function" href="classlog4cxx_1_1Logger.html#ab2d1e6be52dbe1bc81e01fd70a755a63">log4cxx::Logger::getLogger</a>(<span class="stringliteral">&quot;com.foo.Bar&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This request is enabled, because WARN &gt;= INFO.</span></div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga530190bc1766b89d1f69ad572509aed2">LOG4CXX_WARN</a>(logger, <span class="stringliteral">&quot;Low fuel level.&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This request is disabled, because DEBUG &lt; INFO.</span></div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>(logger, <span class="stringliteral">&quot;Starting search for nearest gas station.&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The logger instance barlogger, named &quot;com.foo.Bar&quot;,</span></div>
<div class="line"><span class="comment">// will inherit its level from the logger named</span></div>
<div class="line"><span class="comment">// &quot;com.foo&quot; Thus, the following request is enabled</span></div>
<div class="line"><span class="comment">// because INFO &gt;= INFO.</span></div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga61dfed4f5eca82725a90a331f37857d3">LOG4CXX_INFO</a>(barlogger. <span class="stringliteral">&quot;Located nearest gas station.&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This request is disabled, because DEBUG &lt; INFO.</span></div>
<div class="line"><a class="code hl_define" href="group__LoggingMacros.html#gae1bc2ab20d5f2d7660995ea8244d3a26">LOG4CXX_DEBUG</a>(barlogger, <span class="stringliteral">&quot;Exiting gas station search&quot;</span>);</div>
<div class="ttc" id="aclasslog4cxx_1_1Level_html_ab7c74df8715d5009b3d9f06658d19847"><div class="ttname"><a href="classlog4cxx_1_1Level.html#ab7c74df8715d5009b3d9f06658d19847">log4cxx::Level::getInfo</a></div><div class="ttdeci">static LevelPtr getInfo()</div></div>
</div><!-- fragment --><h1><a class="anchor" id="appenders"></a>
Appenders</h1>
<p>The ability to selectively enable or disable logging requests based on their logger is only part of the picture.</p>
<p>Log4cxx allows logging requests to print to multiple destinations. In Log4cxx speak, an output destination is called an <em>appender</em>. Log4cxx provides appenders to write to:</p><ul>
<li><a class="el" href="classlog4cxx_1_1ConsoleAppender.html">stdout or stderr</a></li>
<li><a class="el" href="classlog4cxx_1_1rolling_1_1RollingFileAppender.html">files</a></li>
<li><a class="el" href="classlog4cxx_1_1nt_1_1NTEventLogAppender.html">the NT Event log</a></li>
<li><a class="el" href="classlog4cxx_1_1net_1_1SyslogAppender.html">the UNIX Syslog</a></li>
<li><a class="el" href="classlog4cxx_1_1net_1_1XMLSocketAppender.html">a socket server</a></li>
<li><a class="el" href="classlog4cxx_1_1net_1_1SMTPAppender.html">a SMTP server</a></li>
<li><a class="el" href="classlog4cxx_1_1db_1_1ODBCAppender.html">a database</a></li>
</ul>
<p>If the same file receives log requests concurrently from multiple process, use <a class="el" href="classlog4cxx_1_1rolling_1_1MultiprocessRollingFileAppender.html">this appender</a>. It is also possible to log <a class="el" href="classlog4cxx_1_1AsyncAppender.html">asynchronously</a> to another appender. See <a class="el" href="async-example_8xml-example.html">async-example.xml</a></p>
<p>The <a class="el" href="classlog4cxx_1_1Logger.html#afb398258ec8033737ed95aed016daf6c">addAppender</a> method adds an appender to a given logger. More than one appender can be attached to a logger.</p>
<h2><a class="anchor" id="appender-additivity"></a>
Additivity</h2>
<p>Each enabled logging request for a given logger will be forwarded to all the appenders in that logger as well as the appenders higher in the hierarchy. In other words, appenders are inherited additively from the logger hierarchy. For example, if a console appender is added to the root logger, then all enabled logging requests will at least print on the console. If in addition a file appender is added to a logger, say <em>C</em>, then enabled logging requests for <em>C</em> and <em>C</em>'s children will print on a file <em>and</em> on the console. It is possible to override this default behavior so that appender accumulation is no longer additive by <a class="el" href="classlog4cxx_1_1Logger.html#a05bf2d4cbe5cb66cde38c8fa5c1f0fe4">setting the additivity flag</a> to <code>false</code>.</p>
<p>The rules governing appender additivity are summarized below.</p>
<p>The output of a log statement of logger <em>C</em> will go to all the appenders in <em>C</em> and its ancestors. This is the meaning of the term "appender
additivity". However, if an ancestor of logger <em>C</em>, say <em>P</em>, has the additivity flag set to <em>false</em>, then <em>C</em>'s output will be directed to all the appenders in <em>C</em> and it's ancestors up to and including <em>P</em> but, not the appenders in any of the ancestors of <em>P</em>.</p>
<p>Loggers have their additivity flag set to <em>true</em> by default, meaning output goes to the appender attached to a parent <a class="el" href="classlog4cxx_1_1Logger.html">Logger</a>. It is therefore often sufficient to configure or attach an appender only to the root logger in the <a class="el" href="classlog4cxx_1_1Hierarchy.html">Hierarchy</a>.</p>
<p>The table below shows an example:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Logger Name   </th><th class="markdownTableHeadNone">Added Appenders   </th><th class="markdownTableHeadNone">Additivity Flag   </th><th class="markdownTableHeadNone">Output Targets   </th><th class="markdownTableHeadNone">Comment    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">root   </td><td class="markdownTableBodyNone">A1   </td><td class="markdownTableBodyNone">not applicable   </td><td class="markdownTableBodyNone">A1   </td><td class="markdownTableBodyNone">The root logger is anonymous but can be accessed with the <a class="el" href="classlog4cxx_1_1Logger.html#ac53c8f83b37b20ff4b18ee87b772be25" title="Retrieve the root logger.">log4cxx::Logger::getRootLogger()</a> method. There is no default appender attached to root.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">x   </td><td class="markdownTableBodyNone">A-x1, A-x2   </td><td class="markdownTableBodyNone">true   </td><td class="markdownTableBodyNone">A1, A-x1, A-x2   </td><td class="markdownTableBodyNone">Appenders of "x" and root.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">x.y   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">true   </td><td class="markdownTableBodyNone">A1, A-x1, A-x2   </td><td class="markdownTableBodyNone">Appenders of "x" and root.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">x.y.z   </td><td class="markdownTableBodyNone">A-xyz1   </td><td class="markdownTableBodyNone">true   </td><td class="markdownTableBodyNone">A1, A-x1, A-x2, A-xyz1   </td><td class="markdownTableBodyNone">Appenders in "x.y.z", "x" and root.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">security   </td><td class="markdownTableBodyNone">A-sec   </td><td class="markdownTableBodyNone">false   </td><td class="markdownTableBodyNone">A-sec   </td><td class="markdownTableBodyNone">No appender accumulation since the additivity flag is set to <em>false</em>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">security.access   </td><td class="markdownTableBodyNone">none   </td><td class="markdownTableBodyNone">true   </td><td class="markdownTableBodyNone">A-sec   </td><td class="markdownTableBodyNone">Only appenders of "security" because the additivity flag in "security" is set to <em>false</em>.   </td></tr>
</table>
<h1><a class="anchor" id="layouts"></a>
Layouts</h1>
<p>More often than not, users wish to customize not only the output destination but also the output format. This is accomplished by associating a <em>layout</em> with an appender. The layout is responsible for formatting the logging request according to the user's wishes, whereas an appender takes care of sending the formatted output to its destination.</p>
<p>The <a class="el" href="classlog4cxx_1_1PatternLayout.html">PatternLayout</a>, part of the standard Log4cxx distribution, lets the user specify the output format according to conversion patterns similar to the C language <em>printf</em> function.</p>
<p>For example, the PatternLayout with the conversion pattern <code>%r [%t] %%-5p %c - %m%n</code> will output something akin to:</p>
<div class="fragment"><div class="line">176 [main] INFO org.foo.Bar - Located nearest gas station.</div>
</div><!-- fragment --><p>The first field is the number of milliseconds elapsed since the start of the program. The second field is the thread making the log request. The third field is the level of the log statement. The fourth field is the name of the logger associated with the log request. The text after the '-' is the message of the statement.</p>
<p>The following examples show how you might configure the PatternLayout in order to achieve the results shown. Each example has two blocks of code: the layout for the PatternLayout, and a sample output message.</p>
<h2><a class="anchor" id="pattern1"></a>
Pattern 1</h2>
<p>This pattern contains the date in an ISO-8601 format(without fractional seconds), followed by the logger name, the level, and then the message.</p>
<div class="fragment"><div class="line">[%d{yyyy-MM-dd HH:mm:ss}] %c %-5p - %m%n</div>
</div><!-- fragment --><div class="fragment"><div class="line">[2020-12-24 15:31:46] root INFO  - Hello there!</div>
</div><!-- fragment --><h2><a class="anchor" id="pattern2"></a>
Pattern 2</h2>
<p>Similar to Pattern 1, except using ISO-8601 with fractional seconds</p>
<div class="fragment"><div class="line">[%d] %c %-5p - %m%n</div>
</div><!-- fragment --><div class="fragment"><div class="line">[2020-12-24 15:35:39,225] root INFO  - Hello there!</div>
</div><!-- fragment --><h2><a class="anchor" id="pattern3"></a>
Pattern 3</h2>
<p>Prints out the number of milliseconds since the start of the application, followed by the level(5 character width), followed by the logger name (20 character width), followed by the message.</p>
<div class="fragment"><div class="line">%r %-5p %-20c %m%n</div>
</div><!-- fragment --><div class="fragment"><div class="line">0 INFO  root                 Hello there!</div>
</div><!-- fragment --><h2><a class="anchor" id="pattern4"></a>
Pattern 4</h2>
<p>If you have no idea where a log message is coming from, it's possible to print out more information about the place the log statement is coming from. For example, we can get the filename, class name, method name, and line number in one log message. This utilises the %F(file name), %C(class name), %M(method name), %L(line number) patterns to output more information:</p>
<div class="fragment"><div class="line">(%F:%C[%M]:%L) %m%n</div>
</div><!-- fragment --><p>Possible output: </p><div class="fragment"><div class="line">(/home/robert/log4cxx-test-programs/fooclass.cpp:FooClass[FooClass]:9) Constructor running</div>
<div class="line">(/home/robert/log4cxx-test-programs/fooclass.cpp:FooClass[doFoo]:13) Doing foo</div>
</div><!-- fragment --><p>Note that unlike Java logging, the location information is free(as it utilizes macros to determine this information at compile-time).</p>
<p>The other layouts provided in Log4cxx are:</p>
<ul>
<li><a class="el" href="classlog4cxx_1_1FMTLayout.html">libfmt patterns</a></li>
<li><a class="el" href="classlog4cxx_1_1HTMLLayout.html">a HTML table</a></li>
<li><a class="el" href="classlog4cxx_1_1JSONLayout.html">a JSON dictionary</a></li>
<li><a class="el" href="classlog4cxx_1_1SimpleLayout.html">level - message</a></li>
<li><a class="el" href="classlog4cxx_1_1xml_1_1XMLLayout.html">log4j event elements</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="usage-overview.html">Use</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="https://www.doxygen.nl/images/doxygen.png" alt="Doxygen"/></a> 1.9.6 on Mon Jan 1 2024 </li>
    <li class="center">
Copyright &copy; 2003-2023 <a href="https://www.apache.org/">Apache Software Foundation</a>. All Rights Reserved.  <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a><br/>
Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.<br/>
    </li>
  </ul>
</div>
</body>
</html>

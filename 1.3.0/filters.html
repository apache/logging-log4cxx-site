<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Log4cxx: Filtering Log Messages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '42']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Log4cxx
   &#160;<span id="projectnumber">Version 1.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('filters.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Filtering Log Messages </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#labeling-log-output">Labeling Log Output</a></li>
<li class="level1"><a href="#excluding-log-output">Excluding Log Output</a></li>
<li class="level1"><a href="#configure-filter">Runtime Configuration</a><ul><li class="level2"><a href="#map-filter">Using MDC Values</a></li>
<li class="level2"><a href="#location-info-filter">Using the Request Location</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_src_site_markdown_filters"></a></p>
<h1><a class="anchor" id="labeling-log-output"></a>
Labeling Log Output</h1>
<p>To uniquely stamp each request to relate it to a particular source, you can push contextual information into the <em>Nested Diagnostic Context</em> (NDC) using the <em><a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a></em> class or the <em>Mapped Diagnostic Context</em> provided by <em><a class="el" href="classlog4cxx_1_1MDC.html" title="A Mapped Diagnostic Context, or MDC in short, is an instrument for distinguishing interleaved log out...">log4cxx::MDC</a></em> class. For an example using <a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a> refer to <a class="el" href="ndc-example_8cpp-example.html">ndc-example.cpp</a>.</p>
<p>The NDC is managed per thread as a <em>stack</em> of contextual information. When the layout specifies that the NDC is to be included, each log entry will include the entire stack for the current thread. A <a class="el" href="classlog4cxx_1_1PatternLayout.html" title="A flexible layout configurable with pattern string.">log4cxx::PatternLayout</a> allows named entries of the MDC to be included in the log message. The user is responsible for placing the correct information in the NDC/MDC by creating a <em><a class="el" href="classlog4cxx_1_1NDC.html" title="A Nested Diagnostic Context, or NDC in short, is an instrument to distinguish interleaved log output ...">log4cxx::NDC</a></em> or <em><a class="el" href="classlog4cxx_1_1MDC.html" title="A Mapped Diagnostic Context, or MDC in short, is an instrument for distinguishing interleaved log out...">log4cxx::MDC</a></em> stack variable at a few well-defined points in the code. In contrast, the per-client logger approach commands extensive changes in the code.</p>
<p>To illustrate this point, let us take the example of a servlet delivering content to numerous clients. The servlet can build the NDC at the very beginning of the request before executing other code. The contextual information can be the client's host name and other information inherent to the request, typically information contained in cookies. Hence, even if the servlet is serving multiple clients simultaneously, the logs initiated by the same code, i.e. belonging to the same logger, can still be distinguished because each client request will have a different NDC stack. Contrast this with the complexity of passing a freshly instantiated logger to all code exercised during the client's request.</p>
<p>Nevertheless, some sophisticated applications, such as virtual hosting web servers, must log differently depending on the virtual host context and also depending on the software component issuing the request. Recent Log4cxx releases support multiple hierarchy trees. This enhancement allows each virtual host to possess its own copy of the logger hierarchy.</p>
<h1><a class="anchor" id="excluding-log-output"></a>
Excluding Log Output</h1>
<p>When dealing with large amounts of logging information, it can be useful to filter on messages that we are interested in. This filtering only takes places after determining that the level of the current logger would log the message in the first place. When defining filters, note that they can only be defined on a per-appender basis, they do not globally affect anything.</p>
<p>The filtering system is similar in concept to Linux iptables rules, in that there is a chain of filters that can accept a log message, deny the log message, or pass the message on to the next filter. Accepting a log message means that the message will be logged immediately without consulting other filters. Denying has the opposite affect, immediately dropping the log message and not consulting any other filters.</p>
<p>See the documentation for <a class="el" href="classlog4cxx_1_1spi_1_1Filter.html">Filter</a> for some more information, or view a <a class="el" href="configuration-samples.html">configuration sample</a>.</p>
<p>The following filters are available:</p><ul>
<li><a class="el" href="classlog4cxx_1_1filter_1_1AndFilter.html">AndFilter</a> - Takes in a list of filters that must all match</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1DenyAllFilter.html">DenyAllFilter</a> - Drops all log messages that reach it</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LevelMatchFilter.html">LevelMatchFilter</a> - Filter log messages based off of their level</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LevelRangeFilter.html">LevelRangeFilter</a> - Filter log messages based off of their level in a given range</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LocationInfoFilter.html">LocationInfoFilter</a> - Filter log messages based off of their location(line number and/or method name)</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1LoggerMatchFilter.html">LoggerMatchFilter</a> - Accept or deny depending on the logger that generated the message</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1MapFilter.html">MapFilter</a> - Based off of the log messages MDC, accept or deny the message</li>
<li><a class="el" href="classlog4cxx_1_1filter_1_1StringMatchFilter.html">StringMatchFilter</a> - If the given substring is found in the message, accept or deny</li>
</ul>
<h1><a class="anchor" id="configure-filter"></a>
Runtime Configuration</h1>
<h2><a class="anchor" id="map-filter"></a>
Using MDC Values</h2>
<p>The <a class="el" href="classlog4cxx_1_1filter_1_1MapFilter.html">MapFilter</a> allows filtering against data elements that are in the <em>Mapped Diagnostic Context</em> (<em><a class="el" href="classlog4cxx_1_1MDC.html" title="A Mapped Diagnostic Context, or MDC in short, is an instrument for distinguishing interleaved log out...">log4cxx::MDC</a></em>).</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"><b>Parameter Name</b>   </th><th class="markdownTableHeadLeft"><b>Type</b>   </th><th class="markdownTableHeadLeft"><b>Description</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Operator   </td><td class="markdownTableBodyLeft">LogString   </td><td class="markdownTableBodyLeft">If the operator is <code>AND</code> then all the key/value pairs must match; any other value is implicitly an <code>OR</code> and a match by any one of the key/value pairs will be considered to be a match. The default value is <code>OR</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">AcceptOnMatch   </td><td class="markdownTableBodyLeft">LogString   </td><td class="markdownTableBodyLeft">Action to take when the filter matches. May be <code>true</code> or <code>false</code>. The default value is <code>false</code>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MDC key   </td><td class="markdownTableBodyLeft">LogString   </td><td class="markdownTableBodyLeft">Any name other than <code>Operator</code> or <code>AcceptOnMatch</code> is considered a key to the MDC along with the value to match on. Keys may only be specified once; duplicate keys will replace earlier ones.   </td></tr>
</table>
<p>In this configuration, the <a class="el" href="classlog4cxx_1_1filter_1_1MapFilter.html">MapFilter</a> can be used to filter based on system inserted values such as IP address and/or Username. In this example, we assume that the program has inserted appropriate values for <code>user.ip</code> and <code>user.name</code> into the MDC. In this case, when both the IP address is <code>127.0.0.1</code> and the Username is <code>test</code>, the entry will not be logged.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://logging.apache.org/&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.FileAppender&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.SimpleLayout&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;File&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;logs/app.log&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;Append&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.name&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;test&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;Operator&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;AND&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;AcceptOnMatch&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;false&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">priority</span>       <span class="keyword">value</span>=<span class="stringliteral">&quot;all&quot;</span>     /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">appender-ref</span>   <span class="keyword">ref</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span>    /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>If we wanted to exclude multiple IP addresses from the log, we need to define a separate filter for each one as we donâ€™t support wildcards. Since the default <code>AcceptOnMatch</code> value is <code>false</code>, we can simplify to a single line per filter. In the configuration below we would skip logs for IP addresses matching 192.168.0.5 - 7.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://logging.apache.org/&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.FileAppender&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.SimpleLayout&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;File&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;logs/app.log&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;Append&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span> </div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;192.168.0.5&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;192.168.0.6&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;192.168.0.7&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">priority</span>       <span class="keyword">value</span>=<span class="stringliteral">&quot;all&quot;</span>     /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">appender-ref</span>   <span class="keyword">ref</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span>    /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>In the case where we only want to log entries from a particular set of IP addresses (<b>not recommended</b> as this could be a security vulnerability), we need to have a final <code>DenyAllFilter</code> to catch the fall through. In this configuration, we would <b>only</b> log entries from 192.168.0.251 and 192.168.0.252.</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://logging.apache.org/&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.FileAppender&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;log4cxx.SimpleLayout&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;File&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;logs/app.log&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;Append&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;192.168.0.251&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;AcceptOnMatch&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;MapFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;user.ip&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;192.168.0.252&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;AcceptOnMatch&quot;</span></div>
<div class="line">                    <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span></div>
<div class="line">            /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;DenyAllFilter&quot;</span> /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">priority</span>       <span class="keyword">value</span>=<span class="stringliteral">&quot;all&quot;</span>     /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">appender-ref</span>   <span class="keyword">ref</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span>    /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="location-info-filter"></a>
Using the Request Location</h2>
<p>The <a class="el" href="classlog4cxx_1_1filter_1_1LocationInfoFilter.html">LocationInfoFilter</a> allows filtering against the location in the file that the log statement was made. Location information must not be disabled in order for this filter to be effective. Location information is disabled with the <code>LOG4CXX_DISABLE_LOCATION_INFO</code> macro.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"><b>Parameter Name</b>   </th><th class="markdownTableHeadLeft"><b>Type</b>   </th><th class="markdownTableHeadLeft"><b>Description</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Operator   </td><td class="markdownTableBodyLeft">LogString   </td><td class="markdownTableBodyLeft">If the operator is <code>AND</code> then all the parts of the location(line number and method name) must match. If set to <code>OR</code> then only one needs to match. The default value is <code>OR</code>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">AcceptOnMatch   </td><td class="markdownTableBodyLeft">bool   </td><td class="markdownTableBodyLeft">If <code>true</code>, accept the message when it matches the parameters. If <code>false</code>, deny the message when it matches the parameters.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">LineNumber   </td><td class="markdownTableBodyLeft">int   </td><td class="markdownTableBodyLeft">The line number to match on. The default line number is -1.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Method   </td><td class="markdownTableBodyLeft">LogString   </td><td class="markdownTableBodyLeft">The method to match on. The method name may be compiler-specific. On GCC, the method name will look like <code>Class::methodName</code>   </td></tr>
</table>
<p>Assume that our code looks something like the following:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>(logger, <span class="stringliteral">&quot;About to do something!&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = 0; x &lt; 100; x++ ){</div>
<div class="line">    <a class="code hl_define" href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a>(logger, <span class="stringliteral">&quot;Do something number &quot;</span> &lt;&lt; x);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__LoggingMacros_html_ga806900dd7eafb458d0472d9c8f84594b"><div class="ttname"><a href="group__LoggingMacros.html#ga806900dd7eafb458d0472d9c8f84594b">LOG4CXX_TRACE</a></div><div class="ttdeci">#define LOG4CXX_TRACE(logger, message)</div><div class="ttdoc">Add a new logging event containing message to attached appender(s) if logger is enabled for TRACE eve...</div><div class="ttdef"><b>Definition:</b> log4cxx/logger.h:2196</div></div>
</div><!-- fragment --><p>For various reasons, we may want to know that we are about to do something, but we don't want to know each iteration of the loop. In order to filter out this one message we can create a LocationInfoFilter in order to specifiy the line number that this message is on in order to filter it out:</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">log4j:configuration</span> <span class="keyword">xmlns:log4j</span>=<span class="stringliteral">&quot;http://logging.apache.org/&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">appender</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;ConsoleAppender&quot;</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Target&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;System.err&quot;</span>/&gt;</div>
<div class="line">    </div>
<div class="line">        &lt;<span class="keywordtype">layout</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ConversionPattern&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;%p - %m%n&quot;</span>/&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">layout</span>&gt;</div>
<div class="line"> </div>
<div class="line">        &lt;<span class="keywordtype">filter</span> <span class="keyword">class</span>=<span class="stringliteral">&quot;LocationInfoFilter&quot;</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;LineNumber&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;182&quot;</span> /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;Operator&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;OR&quot;</span> /&gt;</div>
<div class="line">            &lt;<span class="keywordtype">param</span>  <span class="keyword">name</span>=<span class="stringliteral">&quot;AcceptOnMatch&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;false&quot;</span> /&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">filter</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">appender</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">root</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">priority</span>       <span class="keyword">value</span>=<span class="stringliteral">&quot;all&quot;</span>     /&gt;</div>
<div class="line">        &lt;<span class="keywordtype">appender-ref</span>   <span class="keyword">ref</span>=<span class="stringliteral">&quot;SIMPLE&quot;</span>    /&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">root</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">log4j:configuration</span>&gt;</div>
</div><!-- fragment --><p>Doing this allows us to still see the "About to do something!" message, but ignore each iteration of the loop. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="usage-overview.html">Use</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="https://www.doxygen.nl/images/doxygen.png" alt="Doxygen"/></a> 1.9.6 on Fri May 10 2024 </li>
    <li class="center">
Copyright &copy; 2003-2023 <a href="https://www.apache.org/">Apache Software Foundation</a>. All Rights Reserved.  <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a><br/>
Apache Logging, Apache Log4j, Log4j, Apache, the Apache feather logo, and the Apache Logging project logo are trademarks of The Apache Software Foundation.<br/>
    </li>
  </ul>
</div>
</body>
</html>
